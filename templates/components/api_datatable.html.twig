{# templates/components/datatable.html.twig #}

{% set columns = this.normalizedColumns %}
{% set templates = [] %}
{#    {% if block(c.name) is defined %}#}
{#        {% set templates[c.name] = block(c.name) %}#}
{#        {% with {row: row} %}#}
{#            {{ block(c.name) }}#}
{#        {% endwith %}#}
{#    {% else %}#}
{#        {{ attribute(row, c.name)|default() }}#}
{#    {% endif %}#}


<div {{ stimulus_controller(this.stimulusController, {
        class: this.class,
        sortableFields: sortable_fields(this.class),
        api_call:  api_route(this.class),
        columnConfiguration: columns|json_encode,
        filter: this.filter
    }) }}>

        {{
        api_route(class)
        }}

        filter: filter,


<table class="table" {{ stimulus_target(this.stimulusController, 'table') }}></table>
        {#                    {% else %} #}
        {#                        {{ attribute(row, c) }} #}
        {#                    {% endif %} #}

    </div>

